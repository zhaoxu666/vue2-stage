{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["\r\nclass Observer {\r\n    constructor(data) {\r\n      // Object.defineProperty只能劫持已经存在的属性，后增的，删除的不知道 （vue里面会为此单独写一些api $set $delete）\r\n      this.walk(data)\r\n    }\r\n    walk (data) { // 循环对象，对属性依次劫持\r\n        // 重新定义属性\r\n        Object.keys(data).forEach(key => defineReactive(data, key, data[key]))\r\n    }\r\n}\r\n\r\nexport function defineReactive (target, key, value) {\r\n    \r\n}\r\n\r\nexport function observe(data) {\r\n    // 对这个对象进行劫持\r\n    if(typeof data !==  'object' || data == null) {\r\n        return // 只对对象进行劫持\r\n    }\r\n\r\n    // 如果一个对象被劫持过了，那就不需要再被劫持了（要判断一个对象是否被劫持过，可以增添一个实例，用实例来判断是否被劫持过）\r\n    return new Observer(data)\r\n}","import { observe } from \"./observe/index\"\r\n\r\nexport function initState(vm) {\r\n    // 获取所有的选项\r\n    const opts = vm.$options\r\n    if (opts.data) {\r\n      initData(vm)\r\n    }\r\n  }\r\n  \r\n  function initData (vm) {\r\n      // data 可能是函数和对象\r\n    let data = vm.$options.data\r\n    data = typeof data === 'function'? data.call(vm) : data\r\n    \r\n    // 对数据进行劫持 vue2里采用了一个api defineProperty\r\n    observe(data)\r\n\r\n  }","\r\nimport { initState } from \"./state\"\r\n// 就是给Vue增加init方法\r\nexport function initMixin() {\r\n    // 用于初始化操作\r\n    Vue.prototype._init = function (options) {\r\n        // 我们使用vue的实时， $nextTick 等等 都是私有属性\r\n        const vm = this\r\n        vm.$options = options // 将用户的选项挂载到实例上\r\n\r\n        // 初始化状态\r\n        initState(vm)\r\n    }\r\n}\r\n\r\n","import { initMixin } from './init'\r\nfunction Vue (options) {\r\n  this._init(options)\r\n}\r\n\r\n// 扩展了init方法\r\ninitMixin(Vue)\r\n\r\nexport default Vue"],"names":["Observer","data","walk","Object","keys","forEach","key","defineReactive","target","value","observe","initState","vm","opts","$options","initData","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MACMA,QAAQ,gBAAA,YAAA;EACV,EAAA,SAAA,QAAA,CAAYC,IAAI,EAAE;EAAA,IAAA,eAAA,CAAA,IAAA,EAAA,QAAA,CAAA,CAAA;EAChB;EACA,IAAA,IAAI,CAACC,IAAI,CAACD,IAAI,CAAC,CAAA;EACjB,GAAA;EAAC,EAAA,YAAA,CAAA,QAAA,EAAA,CAAA;EAAA,IAAA,GAAA,EAAA,MAAA;MAAA,KACD,EAAA,SAAA,IAAA,CAAMA,IAAI,EAAE;EAAE;EACV;QACAE,MAAM,CAACC,IAAI,CAACH,IAAI,CAAC,CAACI,OAAO,CAAC,UAAAC,GAAG,EAAA;UAAA,OAAIC,cAAc,CAACN,IAAI,EAAEK,GAAG,EAAEL,IAAI,CAACK,GAAG,CAAC,CAAC,CAAA;SAAC,CAAA,CAAA;EAC1E,KAAA;EAAC,GAAA,CAAA,CAAA,CAAA;EAAA,EAAA,OAAA,QAAA,CAAA;EAAA,CAAA,EAAA,CAAA;EAGE,SAASC,cAAc,CAAEC,MAAM,EAAEF,GAAG,EAAEG,KAAK,EAAE,EAEpD;EAEO,SAASC,OAAO,CAACT,IAAI,EAAE;EAC1B;IACA,IAAG,OAAA,CAAOA,IAAI,CAAM,KAAA,QAAQ,IAAIA,IAAI,IAAI,IAAI,EAAE;EAC1C,IAAA,OAAM;EACV,GAAA;;EAEA;EACA,EAAA,OAAO,IAAID,QAAQ,CAACC,IAAI,CAAC,CAAA;EAC7B;;ECtBO,SAASU,SAAS,CAACC,EAAE,EAAE;EAC1B;EACA,EAAA,IAAMC,IAAI,GAAGD,EAAE,CAACE,QAAQ,CAAA;IACxB,IAAID,IAAI,CAACZ,IAAI,EAAE;MACbc,QAAQ,CAACH,EAAE,CAAC,CAAA;EACd,GAAA;EACF,CAAA;EAEA,SAASG,QAAQ,CAAEH,EAAE,EAAE;EACnB;EACF,EAAA,IAAIX,IAAI,GAAGW,EAAE,CAACE,QAAQ,CAACb,IAAI,CAAA;EAC3BA,EAAAA,IAAI,GAAG,OAAOA,IAAI,KAAK,UAAU,GAAEA,IAAI,CAACe,IAAI,CAACJ,EAAE,CAAC,GAAGX,IAAI,CAAA;;EAEvD;IACAS,OAAO,CAACT,IAAI,CAAC,CAAA;EAEf;;EChBF;EACO,SAASgB,SAAS,GAAG;EACxB;EACAC,EAAAA,GAAG,CAACC,SAAS,CAACC,KAAK,GAAG,UAAUC,OAAO,EAAE;EACrC;MACA,IAAMT,EAAE,GAAG,IAAI,CAAA;EACfA,IAAAA,EAAE,CAACE,QAAQ,GAAGO,OAAO,CAAC;;EAEtB;MACAV,SAAS,CAACC,EAAE,CAAC,CAAA;KAChB,CAAA;EACL;;ECZA,SAASM,KAAG,CAAEG,OAAO,EAAE;EACrB,EAAA,IAAI,CAACD,KAAK,CAACC,OAAO,CAAC,CAAA;EACrB,CAAA;;EAEA;EACAJ,SAAS,CAAI,CAAC;;;;;;;;"}